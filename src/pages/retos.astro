---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Button from '../components/Button.astro';
import ChallengeCard from '../components/ChallengeCard.astro';
import TimelineComponent from '../components/TimelineComponent.astro';
import ChallengeStats from '../components/ChallengeStats.astro';

// Services and Data
import { RetosService } from '../services/retosService';

// Initialize services
const retosService = RetosService.getInstance();

// Get data from services
const challenges = retosService.getChallenges();
const timeline = retosService.getTimeline();
const stats = retosService.getStats();

// Page metadata
const pageTitle = "Retos y Desaf√≠os - MTO Hackathon 2025";
const pageDescription = "Descubre los tres desaf√≠os tecnol√≥gicos del MTO Hackathon 2025: Sostenibilidad, Inclusi√≥n Social y Educaci√≥n. ¬°Participa y compite por m√°s de S/ 120,000 en premios!";
---

<Layout title={pageTitle} description={pageDescription}>
  <Header currentPath="/retos" />
  
  <main class="retos-page">
    <!-- Hero Section -->
    <section class="retos-hero">
      <div class="container">
        <h1 class="retos-hero__title">
          Retos Tecnol√≥gicos 2025
        </h1>
        <p class="retos-hero__description">
          Tres desaf√≠os √∫nicos que transformar√°n el futuro. Elige tu categor√≠a y demuestra tu innovaci√≥n en 48 horas de pura creatividad tecnol√≥gica.
        </p>
      </div>
    </section>

    <!-- Challenge Stats -->
    <ChallengeStats 
      stats={stats}
      variant="featured"
      animate={true}
    />

    <!-- Challenges Section -->
    <section class="retos-challenges" id="challenges">
      <div class="container">
        <header class="section-header">
          <h2 class="section-title">
            Los Desaf√≠os
          </h2>
          <p class="section-description">
            Cada categor√≠a representa una oportunidad √∫nica para crear soluciones que impacten positivamente a la sociedad. Selecciona el reto que m√°s te inspire.
          </p>
        </header>

        <div class="retos-challenges__grid">
          {challenges.map((challenge, index) => (
            <ChallengeCard
              challenge={challenge}
              index={index}
              variant="default"
              showExamples={true}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- Timeline Section -->
    <section class="retos-timeline" id="timeline">
      <div class="container">
        <header class="section-header">
          <h2 class="section-title">
            Cronograma del Evento
          </h2>
          <p class="section-description">
            48 horas intensas de innovaci√≥n, colaboraci√≥n y aprendizaje. Conoce cada momento clave del hackathon.
          </p>
        </header>

        <TimelineComponent
          events={timeline}
          variant="grid"
          showIcons={true}
        />
      </div>
    </section>

    <!-- Rules Section -->
    <section class="retos-rules" id="rules">
      <div class="container">
        <header class="section-header">
          <h2 class="section-title">
            Reglas Importantes
          </h2>
          <p class="section-description">
            Conoce las reglas clave para una participaci√≥n exitosa en el hackathon.
          </p>
        </header>

        <div class="rules-grid">
          <article class="rule-card">
            <div class="rule__icon">‚ö°</div>
            <h3>Desarrollo desde Cero</h3>
            <p>Todo el c√≥digo debe ser desarrollado durante las 48 horas del evento. No se permite c√≥digo preexistente.</p>
          </article>

          <article class="rule-card">
            <div class="rule__icon">üë•</div>
            <h3>Equipos de 4-6 Personas</h3>
            <p>Cada equipo debe tener entre 4 y 6 integrantes. Puedes formar tu equipo antes o durante el evento.</p>
          </article>

          <article class="rule-card">
            <div class="rule__icon">üõ†Ô∏è</div>
            <h3>Herramientas Libres</h3>
            <p>Usa cualquier framework, librer√≠a, API p√∫blica o herramienta disponible. La creatividad no tiene l√≠mites.</p>
          </article>

          <article class="rule-card">
            <div class="rule__icon">üì§</div>
            <h3>Entrega Puntual</h3>
            <p>Todos los proyectos deben ser entregados antes de las 14:00 del domingo. No hay extensiones.</p>
          </article>

          <article class="rule-card">
            <div class="rule__icon">üé§</div>
            <h3>Presentaci√≥n Obligatoria</h3>
            <p>Cada equipo tendr√° 5 minutos para presentar su soluci√≥n ante el jurado experto.</p>
          </article>

          <article class="rule-card">
            <div class="rule__icon">üèÜ</div>
            <h3>Criterios de Evaluaci√≥n</h3>
            <p>Innovaci√≥n (30%), Impacto (25%), Viabilidad T√©cnica (25%) y Presentaci√≥n (20%).</p>
          </article>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="retos-cta">
      <div class="container">
        <h2 class="cta__title">
          ¬øListo para el Desaf√≠o?
        </h2>
        <p class="cta__description">
          √önete al MTO Hackathon 2025 y forma parte de la pr√≥xima generaci√≥n de innovadores tecnol√≥gicos. ¬°Las inscripciones est√°n abiertas!
        </p>
        <div class="cta__actions">
          <Button
            variant="primary"
            size="lg"
            href="/inscripcion"
            class="cta-button"
          >
            Inscr√≠bete Ahora
          </Button>
          <Button
            variant="outline"
            size="lg"
            href="/bases"
            class="cta-button"
          >
            Ver Bases Completas
          </Button>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<!-- Page-specific styles -->
<link rel="stylesheet" href="/src/styles/pages/retos.css" />

<!-- Page-specific JavaScript -->
<script src="/src/scripts/retos.ts" type="module"></script>


